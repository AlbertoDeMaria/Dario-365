{%- comment -%}
sections/product-grid.liquid
{%- endcomment -%}

<section class="product-grid py-8">
  <div class="container mx-auto px-4">
    {% if section.settings.title != blank %}
      <h2 class="text-2xl font-bold mb-6 text-center">{{ section.settings.title }}</h2>
    {% endif %}
    
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      {%- assign collection = collections[section.settings.collection] -%}
      {%- for product in collection.products limit: section.settings.product_limit -%}
        <div class="product-card">
          <a href="{{ product.url }}" class="block">
            <div class="relative overflow-hidden bg-gray-100 rounded">
              {%- if product.featured_media -%}
                <img
                  src="{{ product.featured_media | img_url: 'medium' }}"
                  alt="{{ product.featured_media.alt | escape }}"
                  width="480"
                  height="480"
                  loading="lazy"
                  class="w-full h-auto object-cover transition-transform duration-300 hover:scale-105"
                >
              {%- else -%}
                {{ 'product-1' | placeholder_svg_tag: 'w-full h-auto object-cover bg-gray-200' }}
              {%- endif -%}
            </div>
            <h3 class="mt-2 text-sm md:text-base font-medium text-center">
              {{ product.title }}
            </h3>
          </a>
        </div>
      {%- else -%}
        {%- for i in (1..4) -%}
          <div class="product-card">
            <div class="relative overflow-hidden bg-gray-100 rounded">
              {{ 'product-' | append: i | placeholder_svg_tag: 'w-full h-auto object-cover bg-gray-200' }}
            </div>
            <h3 class="mt-2 text-base font-medium text-center">
              {{ 'products.product.product_title' | t }}
            </h3>
          </div>
        {%- endfor -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Griglia Prodotti",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Titolo della sezione",
      "default": "I nostri prodotti"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collezione"
    },
    {
      "type": "range",
      "id": "product_limit",
      "min": 4,
      "max": 16,
      "step": 4,
      "default": 8,
      "label": "Numero massimo di prodotti"
    }
  ],
  "presets": [
    {
      "name": "Griglia Prodotti",
      "category": "Prodotti"
    }
  ]
}
{% endschema %}