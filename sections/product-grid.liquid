{%- comment -%}
sections/product-grid.liquid
{%- endcomment -%}

<section class="product-grid" 
  style="
    padding-top: {{ section.settings.padding_top_mobile }}px;
    padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
    padding-left: {{ section.settings.padding_left_mobile }}px;
    padding-right: {{ section.settings.padding_right_mobile }}px;
  "
>
  <div class="container mx-auto">
    {% if section.settings.title != blank %}
      <h2 class="text-2xl font-bold mb-6 text-center">{{ section.settings.title }}</h2>
    {% endif %}
    
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4"
      style="
        @media (min-width: 1024px) {
          padding-top: {{ section.settings.padding_top_desktop }}px;
          padding-bottom: {{ section.settings.padding_bottom_desktop }}px;
          padding-left: {{ section.settings.padding_left_desktop }}px;
          padding-right: {{ section.settings.padding_right_desktop }}px;
        }
      "
    >
      {%- assign collection = collections[section.settings.collection] -%}
      {%- for product in collection.products limit: section.settings.product_limit -%}
        <div class="product-card">
          <a href="{{ product.url }}" class="block">
            <div class="relative overflow-hidden bg-gray-100 rounded">
              {%- if product.featured_media -%}
                <img
                  src="{{ product.featured_media | img_url: 'medium' }}"
                  alt="{{ product.featured_media.alt | escape }}"
                  width="480"
                  height="480"
                  loading="lazy"
                  class="w-full h-auto object-cover transition-transform duration-300 hover:scale-105"
                >
              {%- else -%}
                {{ 'product-1' | placeholder_svg_tag: 'w-full h-auto object-cover bg-gray-200' }}
              {%- endif -%}
            </div>
            <h3 class="mt-2 text-sm md:text-base font-medium text-center">
              {{ product.title }}
            </h3>
          </a>
        </div>
      {%- else -%}
        {%- for i in (1..4) -%}
          <div class="product-card">
            <div class="relative overflow-hidden bg-gray-100 rounded">
              {{ 'product-' | append: i | placeholder_svg_tag: 'w-full h-auto object-cover bg-gray-200' }}
            </div>
            <h3 class="mt-2 text-base font-medium text-center">
              {{ 'products.product.product_title' | t }}
            </h3>
          </div>
        {%- endfor -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Griglia Prodotti",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Titolo della sezione",
      "default": "I nostri prodotti"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collezione"
    },
    {
      "type": "range",
      "id": "product_limit",
      "min": 4,
      "max": 16,
      "step": 4,
      "default": 8,
      "label": "Numero massimo di prodotti"
    },
    {
      "type": "header",
      "content": "Padding Mobile"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20,
      "label": "Padding superiore mobile (px)"
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20,
      "label": "Padding inferiore mobile (px)"
    },
    {
      "type": "range",
      "id": "padding_left_mobile",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 15,
      "label": "Padding sinistro mobile (px)"
    },
    {
      "type": "range",
      "id": "padding_right_mobile",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 15,
      "label": "Padding destro mobile (px)"
    },
    {
      "type": "header",
      "content": "Padding Desktop"
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 40,
      "label": "Padding superiore desktop (px)"
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 40,
      "label": "Padding inferiore desktop (px)"
    },
    {
      "type": "range",
      "id": "padding_left_desktop",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20,
      "label": "Padding sinistro desktop (px)"
    },
    {
      "type": "range",
      "id": "padding_right_desktop",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20,
      "label": "Padding destro desktop (px)"
    }
  ],
  "presets": [
    {
      "name": "Griglia Prodotti",
      "category": "Prodotti"
    }
  ]
}
{% endschema %}